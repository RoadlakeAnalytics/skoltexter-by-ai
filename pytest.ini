[pytest]
# Treat all warnings as errors to enforce proactive maintenance.
filterwarnings =
    error
    # PyTest emits PytestUnraisableExceptionWarning at interpreter shutdown for
    # unraisable exceptions during GC (e.g., unclosed sockets in CPython internals).
    # These are unrelated to project code; ignore this specific framework warning.
    ignore::pytest.PytestUnraisableExceptionWarning

# Always show coverage in local runs and include xdoctest.
addopts = -p no:cacheprovider --xdoctest --cov=src --cov=setup_project --cov-branch --cov-report=term-missing

# Only collect tests from the canonical tests directory, and ignore mutmut's
# working directory to avoid import/file mismatches when a previous mutation
# run has left artifacts under ./mutants.
testpaths = tests
norecursedirs = mutants venv .venv .git build dist

# Note: Other pytest options are configured in pyproject.toml under
# [tool.pytest.ini_options]. This file focuses on warning policy so that
# CI can enforce strict behavior consistently across environments.

# Silence pytest-asyncio deprecation by explicitly setting the default
# fixture loop scope. Valid values: function, class, module, package, session
asyncio_default_fixture_loop_scope = function
